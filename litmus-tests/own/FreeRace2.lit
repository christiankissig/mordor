x := 0;
rp := malloc(1);
{
  *rp := 1;
  x.store(1, rel);
} ||| {
  r2 := x.load(acq);
  if (r2 = 1) {
    free(rp);
  }
}
%%
forbid (ub) []
